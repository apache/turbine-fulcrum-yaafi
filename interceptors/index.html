<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from xdocs/interceptors\index.xml at 14 Sep 2021

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <meta name="author" content="Siegfried Goeschl" />
    <title>Fulcrum YAAFI Avalon Container &#x2013; Fulcrum YAAFI Avalon Container Interceptors</title>
    <link rel="stylesheet" href="../css/maven-base.css" />
    <link rel="stylesheet" href="../css/maven-theme.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="https://turbine.apache.org/" id="bannerLeft" title="Apache Turbine"><img src="https://turbine.apache.org/images/turbine-project.png"  alt="Apache Turbine"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 14 Sep 2021</span>
          &#xA0;| <span id="projectVersion">Version: 1.0.9-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="https://www.apache.org" class="externalLink" title="Apache">Apache</a> |
<a href="https://turbine.apache.org/" class="externalLink" title="Turbine">Turbine</a> |
<a href="https://turbine.apache.org/fulcrum/" class="externalLink" title="Fulcrum">Fulcrum</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Overview</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Main">Main</a></li>
     <li class="none"><a href="../downloads.html" title="Downloads">Downloads</a></li>
     <li class="none"><a href="../howto.html" title="How To">How To</a></li>
     <li class="none"><a href="../cryptography.html" title="Cryptography">Cryptography</a></li>
     <li class="collapsed"><a href="../lifecycle/index.html" title="Lifecycle">Lifecycle</a></li>
     <li class="expanded"><strong>Interceptors</strong>
      <ul>
       <li class="none"><a href="../interceptors/logginginterceptor.html" title="Logging">Logging</a></li>
       <li class="none"><a href="../interceptors/performanceinterceptor.html" title="Performance">Performance</a></li>
       <li class="none"><a href="../interceptors/jamoninterceptor.html" title="JAMon">JAMon</a></li>
      </ul></li>
     <li class="collapsed"><a href="../services/index.html" title="Services">Services</a></li>
     <li class="collapsed"><a href="../specification/index.html" title="Specification">Specification</a></li>
     <li class="collapsed"><a href="../tutorial/index.html" title="Tutorial">Tutorial</a></li>
     <li class="none"><a href="../design.html" title="Design Considerations">Design Considerations</a></li>
     <li class="none"><a href="../todo.html" title="Todo's">Todo's</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
       <h5>Apache</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a></li>
     <li class="none"><a href="https://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
     <li class="none"><a href="https://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">

  
    <section>
<h2><a name="Interceptor_Design_Notes"></a>Interceptor Design Notes</h2>
      
<p> YAAFI supports Dynamic Proxies (introduced with JDK 1.3) and Interceptors which
        was inspired by <a class="externalLink" href="http://hivemind.apache.org/">HiveMind</a>. The intention for
        implementing these features is to provide better debugging and diagnostic support such as
        method invocation tracing, error logs or performance monitoring. </p>
      <section>
<h3><a name="Dynamic_Proxies_and_Interceptors_for_Rookies"></a>Dynamic Proxies and Interceptors for Rookies</h3>
        
<p> A dynamic proxy is a dynamically created class implementing a list of interfaces and
          using an invocation handler. For the caller there is no difference between the real objext
          and the proxy object but invoking an interface method allows the invocation handler to
          delegate the method invocation to the real object. A dynamic proxy only intercepts methods
          defined in an interface but not abstract methods defined in a base class. This limitation
          is not relevant since you are accessing your services only by their interface, aren't
          you?! </p>
      </section>
      <section>
<h3><a name="Related_Concepts"></a>Related Concepts</h3>
        
<p>
          To make interceptors really useful some more infrastructure is needed
          </p>
<table border="0" class="bodyTable">
            
<tr class="a">
              
<th>Item</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>AvalonInterceptorInvocationHandler</td>
              
<td>
                Delegates the invocation of the dynamic proxy to the service instance and
                doing most of the work such as creating an AvalonInterceptorContext and
                invoking the registered interceptors in the correct order
              </td>
            </tr>
            
<tr class="a">
              
<td>AvalonInterceptorContext</td>
              
<td>
                For each intercepted service invocation a new AvalonInterceptorContext
                is created which is passed to all registered interceptors. The
                AvalonInterceptorContext contains information about the service
                and method being invoked and allows access to a request context,
                a thread context using thread local storage and a transaction id.
              </td>
            </tr>
            
<tr class="b">
              
<td>BaseInterceptorServiceImpl</td>
              
<td>
                Is the base class of all existing interceptors to factor out
                common functionality.
              </td>
            </tr>
          </table>
        
      </section>
      <section>
<h3><a name="YAAFI_and_Interceptors"></a>YAAFI and Interceptors</h3>
        
<p>A few things to keep in mind when working with interceptors </p>
<ul>
            
<li>Interceptors only work in conjunction with dynamic proxies. If you turn off the proxy
              creation no interceptor will be invoked for the service </li>
            
<li>Interceptors can be defined on the container level thereby applying the interceptors
              to all services</li>
            
<li>Interceptors can be alos defined on the service level thereby applying the
              interceptors to this service. The service inherits all interceptors defined on the
              container level. </li>
            
<li>Interceptors are implemented as Avalon services giving you access to all of the
              infrastructure and functionality such as dynamic reconfiguration</li>
            
<li>For an interceptor there is never an dynamic proxy created no matter what you define
              in role configuration file</li>
          </ul>
        
      </section>
    </section>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2004&#x2013;2021<a href="https://www.apache.org/">The Apache Software Foundation</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
